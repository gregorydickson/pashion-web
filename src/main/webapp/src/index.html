<!-- index.html -->
<template>
    <require from="./calendars/datepicker"></require>
    <!-- Main building block -->
    <div class="vertical grid-block spa-background">
        <!-- spacer -->
        <div class="grid-block shrink spa-v-spacer ">
        </div>
        <div class="grid-block" style="overflow:visible;">
            <!-- -->
            <!-- Calendar + Request  Panel -->
            <!-- -->
            <div id="left-panel" class="vertical grid-block grid-block-vertical-shadow">
                <!-- header -->
                <div class="grid-block tool-header shrink">
                    <div class="grid-block align-left tool-header-spacer">
                        <span class="ui-text-label-m-broad ">REQUEST MANAGER</span>
                        <span class="alert-box">3</span>
                    </div>
                    <div class="grid-block align-right tool-header-spacer">
                        <span class="expando">
                      <a route-href="route: requestman;"><img src="/assets/nav/expando.png" /></a>
                    </span>
                    </div>
                </div>
                <!-- Calendar -->
                <div class="grid-block shrink">
                    <compose view-model="calendar"></compose>
                </div>
                <!-- search and filter requests -->
                <div class="vertical grid-block shrink" style="margin-left: 1rem; margin-right: 1rem;">
                    <form style="margin-top:20px;">
                        <!-- Search requests -->
                        <input type="text" value.two-way="searchtext" class="search-box" id="search-requests" placeholder="Search Text" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Search Text'">
                        <!-- filter requests -->
                        <span class="inline-label" style="margin-top:1.5rem;">
                        <span class="form-label">Order</span>
                        <select name="" id="">
                            <option>By Date</option>
                            <option>By Person</option>
                            <option>By Request Number</option>
                        </select>
                        </span>
                    </form>
                </div>
                <!-- Accordion -->
                <!--header -->
                <div class="vertical grid-content shrink" style="padding:0; margin-left: 1rem; margin-right: 1rem; margin-top: 0.5rem;">
                    <table class="accordion">
                        <tr>
                            <th class="accordion w10"></th>
                            <th class="accordion w22">ID</th>
                            <th class="accordion w34">PRESS</th>
                            <th class="accordion w24">WHO</th>
                            <th class="accordion w10"></th>
                        </tr>
                    </table>
                </div>
                <!-- row button + content -->
                <div class="vertical grid-content accordion" style="overflow-x:hidden;">
                    <!-- row with button -->
                    <table class="accordion">
                        <tr>
                            <td class="accordion w10">
                                <button id="button1" class="accordion" style="background-color: white" click.delegate="closeExpand(1)"></button>
                            </td>
                            <td class="accordion w22">23457/R</td>
                            <td class="accordion w34">Ralph Lauren</td>
                            <td class="accordion w24">Lauren whatshername overflow</td>
                            <td class="accordion w10"><span class="edit-box" ><a href="#" click.delegate="lookEditMenu(1)">...</a></span></td>
                        </tr>
                    </table>
                    <!-- edit request modal popup -->
                             <div class="look-menu-absolute" id="requestTest1">
                                <span class="look-menu-heading">REQUEST #</span>
                                <ul class="look-menu-list">
                                    <li class="look-menu-item"><a href="#" click.delegate="createSampleEditModal(1)" class="look-menu-link">Edit</a></li>
                                    <li class="look-menu-item"><a href="#" class="look-menu-link">What?</a></li>
                                </ul>
                            </div>
                    <!-- expanding data -->
                    <div id="panel1" class="panel vertical grid-block" style="margin-left: 0.5rem;">
                        <table class="accordion expanded">
                            <tr>
                                <td class="accordion" style="width:45px;">Due:</td>
                                <td class="accordion">14th June 2016</td>
                            </tr>
                            <tr>
                                <td class="accordion">Item 1:</td>
                                <td class="accordion">4567kjl Red Dress with long sleeves</td>
                            </tr>
                            <tr>
                                <td class="accordion">Item 2:</td>
                                <td class="accordion">4447ABC/Slippers, green stitching</td>
                            </tr>
                            <tr>
                                <td class="accordion">Item 3:</td>
                                <td class="accordion">4221/Little black dress, open at the back with long slit</td>
                            </tr>
                        </table>
                    </div>
                    <!-- additional rows to ensure working expansion scrolling etc. For testing only will be replaced as rows generated by backend-->
                    <table class="accordion">
                        <tr>
                            <td class="accordion w10">
                                <button id="button2" class="accordion" style="background-color: white" click.delegate="closeExpand(2)"></button>
                            </td>
                            <td class="accordion w22">23457/R</td>
                            <td class="accordion w34">Channel</td>
                            <td class="accordion w24">Lauren</td>
                            <td class="accordion w10"><span class="edit-box" ><a href="javascript:;">...</a></span></td>
                        </tr>
                    </table>
                    <!-- expanding data -->
                    <div id="panel2" class="panel vertical grid-block" style="margin-left: 0.5rem;">
                        <table class="accordion expanded">
                            <tr>
                                <td class="accordion" style="width:45px;">Due:</td>
                                <td class="accordion">14th June 2016</td>
                            </tr>
                            <tr>
                                <td class="accordion">Item 1:</td>
                                <td class="accordion">4567kjl Red Dress with long sleeves</td>
                            </tr>
                            <tr>
                                <td class="accordion">Item 2:</td>
                                <td class="accordion">4447ABC/Slippers, green stitching</td>
                            </tr>
                            <tr>
                                <td class="accordion">Item 3:</td>
                                <td class="accordion">4221/Little black dress, open at the back with long slit</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-lip">
                </div>
            </div>
            <!-- spacer -->
            <div class="grid-block shrink spa-h-spacer">
            </div>
            <!-- -->
            <!-- Image Grid Large Panel-->
            <!-- -->
            <div id="looks" class="vertical grid-block grid-block-vertical-shadow" style="overflow:hidden;">
                <!-- Header -->
                <div class="grid-block tool-header shrink ">
                    <div id="comms_panel" class="grid-block align-left tool-header tool-header-spacer shrink">
                        <span class="ui-text-label-m-broad">IMAGE SEARCH</span>
                        <span class="ui-text-label-m-broad" style="margin-left:1rem;">${numberImages} Images</span>
                    </div>
                    <div class="grid-block align-right tool-header-spacer">
                        <span class="expando">
                      <a route-href="route: requestman;"><img  src="/assets/nav/collapso.png" /></a>
                    </span>
                    </div>
                </div>
                <!-- search / filter area -->
                <!-- top row -->
                <div class="medium-up-1  grid-block shrink" style="margin-top: 1rem;">
                    <!-- <div class="grid-content shrink" style="margin-top: 0.5rem;">
                        <input id="checkbox-search" type="checkbox" checked>
                    </div> -->
                    <!-- change to UI, use "All" for each filter instead -->
                    <!-- Search -->
                    <div class="grid-content shrink">
                        <input type="text" value.bind="searchText" class="search-box" id="search-images" placeholder="Search Text">
                    </div>
                    <!-- Trending -->
                    <!--<div class="grid-content shrink" style="margin-top: 0.5rem;">
                        <input id="checkbox-trending" type="checkbox"><label for="checkbox-trending">Trending</label>
                    </div> -->
                    <!-- Trending postponed until later release -->
                    <!-- Latest -->
                    <!-- <div class="grid-content shrink" style="margin-top: 0.5rem;">
                       <input id="checkbox-latest" type="checkbox"><label for="checkbox-latest">Latest</label>
                    </div> -->
                    <!-- Latest postponed until later release -->
                    <!-- Available -->
                    <!-- end date -->
                    <div class="grid-content shrink" style="padding-left:0; padding-right:0;">
                        <span class="inline-label">
                            <span class="form-label">Available</span>
                             <input type="text" datepicker placeholder="Start Date" class="datepickerfrom" id=datepickerfrom>
                        </span>
                    </div>
                    <!-- end date -->
                    <div class="grid-content shrink" style="padding-left:0; padding-right:0;">
                        <span class="inline-label">
                            <span class="form-label">to</span>
                            <input type="text" datepicker id="datepickerto" placeholder="End Date" class="datepickerto">
                        </span>
                    </div>
                    <!-- theme -->
                    <div class="grid-content shrink">
                        <span class="inline-label">
                            <span class="form-label">Theme</span>
                        <select name="" id="">
                            <option>All</option>
                            <option>Military</option>
                            <option>Punk</option>
                            <option>Evening</option>
                        </select>
                        </span>
                    </div>
                </div>
                <!-- 2nd row -->
                <div class="medium-up-1  grid-block shrink" style="margin-top: -1rem;">
                    <!-- <div class="grid-content shrink" style="margin-top: 0.5rem;">
                            <input id="checkbox-brand" type="checkbox">
                    </div> -->
                    <!-- Brand -->
                    <div class="grid-content shrink">
                        <span class="inline-label">
                            <span class="form-label">Brand</span>
                        <select name="" id="" value.bind="selectedBrand" change.delegate="filterChange($event.target)">
                            <option value="">All</option>
                            <option repeat.for="brand of brands" model.bind="brand.id">${brand.name}</option>
                        </select>
                        </span>
                    </div>
                    <!-- Seasons -->
                    <div class="grid-content shrink">
                        <span class="inline-label">
                            <span class="form-label">Season</span>
                        <select name="" id="" value.bind="selectedSeason" change.delegate="filterChange($event.target)">
                            <option value="">All</option>
                            <option repeat.for="season of seasons" model.bind="season">${season}</option>
                        </select>
                        </span>
                    </div>
                    <!-- Type -->
                    <div class="grid-content shrink">
                        <span class="inline-label">
                            <span class="form-label">Type</span>
                        <select name="" id="" value.bind="selectedItemType" change.delegate="filterChange($event.target)">
                            <option value="">All</option>
                            <option repeat.for="type of itemTypes" model.bind="type.searchCode">${type.display}</option>
                        </select>
                        </span>
                    </div>
                    <!--- Color -->
                    <div class="grid-content shrink">
                        <span class="inline-label">
                            <span class="form-label">Color</span>
                        <select name="" id="" value.bind="selectedColor" change.delegate="filterChange($event.target)">
                            <option value="">All</option>
                            <option repeat.for="color of colors" model.bind="color">${color}</option>
                        </select>
                        </span>
                    </div>
                </div>
                
 
                <!-- Images/Looks -->
                <div class="cards-list-wrap">
                
                        <div class="cards-list" repeat.for="row of rows" >

                            <div class="card" repeat.for="i of row.numberImagesThisRow" css="width: ${row.numberImagesThisRowPC}%;">
                            
                                <!-- Three dots menu -->
                                <a href="#" class="look-menu-click" click.delegate="lookMenu(row.items[i].id)">
                                    <div class=menu-stripe></div>
                                </a>


                                <!-- Main image -->
                                <div class="card-image">
                                    <img src.bind="row.items[i].image" ref="image"  click.delegate="createZoomDialog(row.items[i].id)"/>
                                </div>
                                <img src="/assets/LOGO_indigitalimagesRM.png" class="indigital-and-align"/> 


                                <!-- Menu on image when three dots clicked -->                            
                                <div class="look-menu" id="look-${row.items[i].id}">
                                    <div class="look-menu-wrap">
                                        <div class="look-menu-heading">
                                            LOOK ${row.items[i].id} <!-- ${i} ${row.numberImagesThisRow} -->
                                            <button type="button" class="close" click.delegate="closeMenu(row.items[i].id)">
                                                  <span aria-hidden="true">×</span>
                                            </button>
                                        </div>

                                        <ul class="look-menu-list">
                                            <li class="look-menu-item"><a href="#" click.delegate="createSampleRequest(row.items[i].id)" class="look-menu-link">Book Look/Sample &nbsp;</a></li>
                                            <li class="look-menu-item"><a href="#" class="look-menu-link">Details</a></li>
                                            
                                            <li if.bind="!row.items[i].fromDate" class="pure-menu-item"><a href="#" click.delegate="setAvailabilitySearchableItem(row.items[i].id)" class="look-menu-link">Set Initial Availability</a></li>

                                            <li if.bind="row.items[i].fromDate" class="pure-menu-item"><a href="#" click.delegate="checkAvailabilitySearchableItem(row.items[i].id)" class="look-menu-link">Check Availability</a></li>

                                            <li class="pure-menu-item"><a href="#" click.delegate="editSearchableItem(row.items[i].id)" class="look-menu-link">Edit</a></li>
                                        </ul>
                                    </div>
                                </div>
                        </div>

                  
                    </div>
                </div>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-lip">
                </div>
            </div>
            <!-- spacer -->
            <div class="grid-block shrink spa-h-spacer">
            </div>
            <!-- -->
            <!-- Communications Panel  -->
            <!-- -->
            <div id="right-panel" class="vertical grid-block grid-block-vertical-shadow" style="overflow:auto;">
                <!-- Header -->
                <div class="grid-block tool-header shrink">
                    <div class="grid-block align-left tool-header tool-header-spacer">
                        <span class="ui-text-label-m-broad tool-header-selected">MESSAGES</span>
                    </div>
                    <div class="grid-block tool-header tool-header-spacer">
                        <span class="ui-text-label-m-broad">CONTACTS</span>
                        <span class="alert-box">8</span>
                    </div>
                    <div id="comms_panel" class="grid-block align-right tool-header tool-header-spacer">
                        <span class="ui-text-label-m-broad tool-header-greyed-out">NEWS</span>
                    </div>
                </div>
                <compose view-model="comms/messagesHeader" style="overflow:hidden; min-height:90px; margin-top: 1rem; margin-right:1rem;margin-left: 1rem;"></compose>
                <compose view-model="comms/messages" style="overflow-x:hidden;"></compose>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-fat-lip">
                </div>
                <!-- New message -->
                <div class="grid-content align-right shrink">
                    <input type="text" class="message-new-message-box" placeholder="New Message">
                </div>
            </div>
        </div>
        <!-- spacer -->
        <div class="grid-content shrink spa-v-spacer">
        </div>
    </div>
</template>
