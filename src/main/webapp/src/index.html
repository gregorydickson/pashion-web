<!-- index.html -->
<template>
    <require from="./calendars/datepicker"></require>
    <require from="./common/customSelect"></require>
    <require from="./common/viewDateFormatter"></require>

    <require from="./dashboard_filters/filters-search"></require>
    <require from="./dashboard_filters/filters-available-from"></require>
    <require from="./dashboard_filters/filters-available-to"></require>
    <require from="./dashboard_filters/filters-color"></require>
    <require from="./dashboard_filters/filters-theme"></require>
    <require from="./dashboard_filters/filters-designer"></require>
    <require from="./dashboard_filters/filters-season"></require>
    <require from="./dashboard_filters/filters-type"></require>
    <require from="./dashboard_filters/filters-city"></require>


        <div class="grid-block spa-background" style="overflow:visible;">
            <!-- -->
            <!-- Calendar + Request  Panel -->
            <!-- -->
            <div id="left-panel" class="vertical grid-block grid-block-vertical-shadow">
                <!-- header -->
                <div class="grid-block tool-header shrink">
                    <div class="grid-block align-left tool-header tool-header-spacer">
                    </div>
                    <div class="grid-block align-left tool-header-spacer">
                        <!-- <span class="ui-text-label-m-broad ">REQUEST MANAGER</span>
                        <span class="alert-box">3</span> -->
                    </div>
                    <div class="grid-block align-right tool-header-spacer">
                        <span class="expando">
                      <a route-href="route: requestman;"><img src="/assets/nav/expando.png" /></a>
                    </span>
                    </div>
                </div>
                <!-- Calendar // Remove for beta release
                <div class="grid-block shrink">
                    <compose view-model="calendar"></compose>
                </div> -->
                <!-- search and filter requests -->
                <div class="vertical grid-block shrink" style="margin-left: 1rem; margin-right: 1rem;">
                    <form style="margin-top:20px;">
                        <!-- Search requests -->
                        <input type="search" value.two-way="searchtext" class="search-box" id="search-requests" placeholder="Search Text" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Search Text'">
                        <!-- filter requests -->
                        <span class="inline-label" style="margin-top:1.5rem;">
                        <span class="form-label">Order</span>
                        <select name="" id="">
                            <option>By Date</option>
                            <option>By Person</option>
                            <option>By Request Number</option>
                        </select>
                        </span>
                    </form>
                </div>
                <!-- Accordion -->
                
                <!-- row button + content -->
               
                <div if.bind="user.type === 'brand'" class="vertical grid-content grid-content-column accordion">
                    <!--header -->
                    <div>
                        <table class="accordion">
                            <tr>
                                <th class="accordion w10"></th>
                                <th class="accordion w22">ID</th>
                                <th class="accordion w34">PRESS</th>
                                <th class="accordion w24">STATUS</th>
                                <th class="accordion w10"></th>
                            </tr>
                        </table>
                    </div>
                    <!-- row with button -->
                    <div repeat.for="booking of bookings">
                        <table class="accordion">
                            <tr>
                                <td class="accordion w10">
                                    <button id="button${booking.id}" class="accordion" style="background-color: white" click.delegate="closeExpand(booking.id)"></button>
                                </td>
                                <td class="accordion w22">${booking.id}</td>
                                <td class="accordion w34">${booking.pressHouse.name}</td>
                                <td class="accordion w24">${booking.requestStatusBrand}</td>
                                <td class="accordion w10">
                                    <div class="look-menu-absolute-wrap">
                                        <span class="edit-box" ><a href="#" click.delegate="sampleRequestMenu(booking.id)">...</a></span>
                                        <!-- edit request modal BRAND popup -->
                                         <div class="look-menu-absolute" id="requestTest${booking.id}">
                                            <span class="look-menu-heading">REQUEST #${booking.id}</span>
                                            <ul class="look-menu-list">
                                                <li class="look-menu-item"><a click.delegate="editSampleRequest(booking.id)" href="#" class="look-menu-link">Edit</a></li>
                                                <li class="look-menu-item"><a click.delegate="denySampleRequest(booking.id)" href="#" class="look-menu-link">Deny</a></li>                                            
                                                <li class="look-menu-item"><a click.delegate="approveSampleRequest(booking.id)" href="#" class="look-menu-link">Approve</a></li>
                                                <li class="look-menu-item"><a click.delegate="sendSampleRequest(booking.id)" href="#" class="look-menu-link">Send</a></li>
                                                <li class="look-menu-item"><a click.delegate="markPickedUpSampleRequest(booking.id)" href="#" class="look-menu-link">Mark Picked Up</a></li>
                                                <li class="look-menu-item"><a click.delegate="markReturnedSampleRequest(booking.id)" href="#" class="look-menu-link">Mark Returned</a></li>
                                                <li class="look-menu-item"><a click.delegate="restockedSampleRequest(booking.id)" href="#" class="look-menu-link">Restocked</a></li>
                                                <li class="look-menu-item"><a click.delegate="deleteSampleRequest(booking.id)" href="#" class="look-menu-link">Delete Request</a></li>
                                            </ul>
                                        </div>
                                    </div>    
                                </td>
                            </tr>
                        </table>

                        <!-- expanding data -->
                        <div id="panel${booking.id}" class="panel vertical grid-block" style="margin-left: 0.5rem;">
                            <table class="accordion expanded">
                                <tr >
                                    <td class="accordion" style="width:45px;">Due:</td>
                                    <td class="accordion">${booking.bookingStartDate | viewDateFormat}</td>
                                </tr>
                                <tr repeat.for="sample of booking.searchableItems">
                                    <td class="accordion">Item ${booking.id}:</td>
                                    <td class="accordion">${sample.id} ${sample.name}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                     
                </div>
               
                <div if.bind="user.type === 'press'"  class="vertical grid-content grid-content-column accordion">
                    <!--header -->
                    <div>
                        <table class="accordion">
                            <tr>
                                <th class="accordion w10"></th>
                                <th class="accordion w22">ID</th>
                                <th class="accordion w34">BRAND</th>
                                <th class="accordion w24">STATUS</th>
                                <th class="accordion w10"></th>
                            </tr>
                        </table>
                    </div>
                    <!-- row with button -->
                    <div repeat.for="booking of bookings">
                        <table class="accordion">
                            <tr>
                                <td class="accordion w10">
                                    <button id="button${booking.id}" class="accordion" style="background-color: white" click.delegate="closeExpand(booking.id)"></button>
                                </td>
                                <td class="accordion w22">${booking.id}</td>
                                <td class="accordion w34">${booking.brand.name}</td>
                                <td class="accordion w24">${booking.requestStatusPress}</td>
                                <td class="accordion w10">
                                    <div class="look-menu-absolute-wrap">
                                        <span class="edit-box" ><a href="#" click.delegate="sampleRequestMenu(booking.id)">...</a></span>
                                        <!-- edit request modal PRESS popup -->
                                         <div class="look-menu-absolute" id="requestTest${booking.id}">
                                            <span class="look-menu-heading">REQUEST #${booking.id}</span>
                                            <ul class="look-menu-list">
                                                <li class="look-menu-item"><a href="#" click.delegate="editSampleRequest(booking.id)" class="look-menu-link">Edit</a></li>
                                                <li class="look-menu-item"><a href="#" click.delegate="pressMarkReceivedSampleRequest(booking.id)" class="look-menu-link">Mark Received</a></li>
                                                <li class="look-menu-item"><a href="#" click.delegate="pressShipSampleRequest(booking.id)"  class="look-menu-link">Ship</a></li>
                                                <li class="look-menu-item"><a href="#" click.delegate="pressMarkPickedUpSampleRequest(booking.id)"  class="look-menu-link">Mark Picked Up</a></li>
                                                <li class="look-menu-item"><a href="#" click.delegate="pressDeleteSampleRequest(booking.id)"  class="look-menu-link">Delete Request</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <!-- expanding data -->
                        <div id="panel${booking.id}" class="panel vertical grid-block" style="margin-left: 0.5rem;">
                            <table class="accordion expanded">
                                <tr >
                                    <td class="accordion" style="width:45px;">Due:</td>
                                    <td class="accordion">${booking.bookingStartDate | viewDateFormat}</td>
                                </tr>
                                <tr repeat.for="sample of booking.searchableItems">
                                    <td class="accordion">Item ${booking.id}:</td>
                                    <td class="accordion">${sample.id} ${sample.name}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                         
                
                </div>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-lip">
                </div>
            </div>
            <!-- spacer -->
            <div class="grid-block shrink spa-h-spacer">
            </div>
            <!-- -->
            <!-- Image Grid Large Panel-->
            <!-- -->
            <div id="looks" class="vertical grid-block grid-block-vertical-shadow" style="overflow:hidden;">
                <!-- Header -->
                <div class="grid-block tool-header shrink ">
                    <div class="grid-block align-left tool-header tool-header-spacer">
                    </div>
                    <div id="comms_panel" class="grid-block align-left tool-header tool-header-spacer shrink">

                        <!-- Header for 'press'-->
                        <span if.bind="user.type === 'press'">
                            <span class="ui-text-label-m-broad">IMAGE SEARCH (</span>
                            <span class="ui-text-label-m-broad">${numberImages} Images)</span>
                        </span> 

                        <!-- Header for 'brand'-->
                        <select if.bind="user.type === 'brand'" class="select-transparent" name="" id="imagesFunctionality">
                            <option value="optionSearchImages"> 
                                <span class="ui-text-label-m-broad">IMAGE SEARCH (</span>
                                <span class="ui-text-label-m-broad">${numberImages} Images )</span>
                            </option>
                            <option value="optionManageImages">MANAGE IMAGES</option>
                        </select>
                       
                        <!-- Header for 'agency'-->
                        <select if.bind="user.type === 'agency'" class="select-transparent" name="" id="imagesFunctionality">
                            <option value="optionSearchImages"> 
                                <span class="ui-text-label-m-broad">IMAGE SEARCH (</span>
                                <span class="ui-text-label-m-broad">${numberImages} Images )</span>
                            </option>
                            <option value="optionManageImages">MANAGE IMAGES</option>
                        </select>
                       
                   </div>
                    <div class="grid-block align-right tool-header-spacer">
                        <span class="expando">
                      <a route-href="route: requestman;"><img  src="/assets/nav/collapso.png" /></a>
                    </span>
                    </div>
                </div>
                <!-- search / filter area -->


                <!-- PRESS filters BEGIN -->
                        <div if.bind="user.type === 'press'">
                                <!-- top row -->
                                <div class="grid-row">
                                    <!-- <div class="grid-row-col" style="margin-top: 0.5rem;">
                                        <input id="checkbox-search" type="checkbox" checked>
                                    </div> -->
                                    <!-- change to UI, use "All" for each filter instead -->
                                    <!-- Search -->
                                    <div class="grid-row-col">
                                        <filters-search></filters-search>
                                    </div>
                                    <!-- Trending -->
                                    <!--<div class="grid-row-col" >
                                        <input id="checkbox-trending" type="checkbox"><label for="checkbox-trending">Trending</label>
                                    </div> -->
                                    <!-- Trending postponed until later release -->
                                    <!-- Latest -->
                                    <!-- <div class="grid-row-col" >
                                       <input id="checkbox-latest" type="checkbox"><label for="checkbox-latest">Latest</label>
                                    </div> -->
                                    <!-- Latest postponed until later release -->
                                    <!-- Available -->
                                    <!-- end date -->
                                    <div class="grid-row-col grid-row-date-start">
                                        <filters-available-from></filters-available-from>
                                    </div>
                                    <!-- end date -->
                                    <div class="grid-row-col grid-row-date-end">
                                        <filters-available-to></filters-available-to>
                                    </div>
                                    <!-- theme -->
                                    <div class="grid-row-col">
                                        <filters-theme></filters-theme>
                                    </div>
                                </div>
                                <!-- 2nd row -->
                                <div class="grid-row">
                                    <!-- <div class="grid-content shrink" style="margin-top: 0.5rem;">
                                            <input id="checkbox-brand" type="checkbox">
                                    </div> -->
                                    <!-- Brand -->
                                    <div class="grid-row-col">
                                        <filters-designer change.delegate="filterChange($event)" ></filters-designer>
                                    </div>
                                    <!-- Seasons -->
                                    <div class="grid-row-col">
                                        <filters-season season.bind="season" change.delegate="filterChange($event)"></filters-season>
                                    </div>
                                    <!-- Type -->
                                    <div class="grid-row-col">
                                        <filters-type></filters-type>
                                    </div>
                                    <!--- Color -->
                                    <div class="grid-row-col">
                                       <filters-color></filters-color>
                                    </div>
                                </div>
                        </div>

                <!-- PRESS filters END -->



                <!-- BRAND filters BEGIN -->
                <div if.bind="user.type === 'brand'">
                    <div class="blockSearchImages">
                        <div class="grid-row">
                            <div class="grid-row-col">
                                <filters-search></filters-search>
                            </div>
                            <div class="grid-row-col">
                                <filters-season></filters-season>
                            </div>
                            <div class="grid-row-col">
                                <filters-color></filters-color>
                            </div>
                            <div class="grid-row-col">
                                <filters-city></filters-city>
                            </div>
                        </div>
                    </div>
                    <div class="blockManageImages">
                        <div class="grid-row">
                            <div class="grid-row-col">
                                <filters-search></filters-search>
                            </div>
                            <div class="grid-row-col">
                                <filters-season></filters-season>
                            </div>                    
                            <div class="grid-row-col"></div>
                            <div class="grid-row-col"></div>
                        </div>
                        <div class="grid-row">
                            <div class="grid-content shrink">
                                <button id="btn-add-files" class="small button hollow" click.delegate="createAddfilesDialog()">Add Images</button>
                                <button class="small button hollow">Delete Season</button>
                            </div>              
                        </div>
                    </div>
                </div>
                <!-- BRAND filters END -->


                <!-- AGENCY filters BEGIN -->
                <div if.bind="user.type === 'agency'">
                    <div class="blockSearchImages">
                        <div class="grid-row">
                            <div class="grid-row-col">
                                <filters-search></filters-search>
                            </div>
                            <div class="grid-row-col">
                                <filters-available-from></filters-available-from>
                            </div>
                            <div class="grid-row-col">
                                <filters-available-to></filters-available-to>
                            </div>
                            <div class="grid-row-col">
                                <filters-city></filters-city>
                            </div>
                        </div>
                        <div class="grid-row">
                            <div class="grid-row-col">
                                <filters-designer></filters-designer>
                            </div>
                            <div class="grid-row-col">
                                <filters-season></filters-season>
                            </div>
                            <div class="grid-row-col">
                                <filters-color></filters-color>
                            </div>
                            <div class="grid-row-col"></div>
                        </div>
                    </div>
                    <div class="blockManageImages">
                        <div class="grid-row">
                            <div class="grid-row-col">
                                <filters-search></filters-search>
                            </div>
                            <div class="grid-row-col">
                                <filters-designer></filters-designer>
                            </div>
                            <div class="grid-row-col">
                                <filters-season></filters-season>
                            </div>                    
                            <div class="grid-row-col"></div>            
                        </div>
                        <div class="grid-row">
                            <div class="grid-content shrink">
                                <button id="btn-add-files" class="small button hollow" click.delegate="createAddfilesDialog()">Add Images</button>
                                <button class="small button hollow">Delete Season</button>
                            </div>              
                        </div>
                    </div>
                </div>
                <!-- AGENCY filters END -->

           
 
                <!-- Images/Looks -->
                <div class="cards-list-wrap">
                
                        <div class="cards-list" repeat.for="row of rows" >

                            <div class="card" repeat.for="i of row.numberImagesThisRow" css="width: ${row.numberImagesThisRowPC}%;">
                            
                                <!-- Three dots menu -->
                                <div class="look-menu-absolute-wrap">
                                    <a href="#" class="look-menu-click " click.delegate="lookMenu(row.items[i].id)">
                                        <div class=menu-stripe></div>
                                    </a>

                                    <!-- Menu on image when three dots clicked -->                            
                                    <div class="look-menu-absolute" id="look-${row.items[i].id}">
                                        <div class="look-menu-wrap">
                                            <div class="look-menu-heading">
                                                LOOK ${row.items[i].name} <!-- ${i} ${row.numberImagesThisRow} -->
                                            </div>

                                            <ul class="look-menu-list">
                                                <li class="look-menu-item"><a href="#" click.delegate="createSampleRequest(row.items[i].id)" class="look-menu-link">Booking &nbsp;</a></li>
                                                <li class="look-menu-item"><a href="#" class="look-menu-link">Details</a></li>
                                                
                                                <li if.bind="!row.items[i].fromDate" class="pure-menu-item"><a href="#" click.delegate="setAvailabilitySearchableItem(row.items[i].id)" class="look-menu-link">Set Initial Availability</a></li>

                                                <li if.bind="row.items[i].fromDate" class="pure-menu-item"><a href="#" click.delegate="checkAvailabilitySearchableItem(row.items[i].id)" class="look-menu-link">Check Availability</a></li>

                                                <li class="pure-menu-item"><a href="#" click.delegate="editSearchableItem(row.items[i].id)" class="look-menu-link">Edit</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div> 

                                <!-- Main image -->
                                <div id="card-${row.items[i].id}" class="card-image">
                                    
                                    <img src.bind="row.items[i].image" ref="image" click.delegate="createZoomDialog(row.items[i],$parent.$index, i)"/>

                                    <div class="card-look-number" click.delegate="createZoomDialog(row.items[i],$parent.$index, i)">${row.items[i].name}</div>
                                    <img src="/assets/LOGO_indigitalimagesRM.png" class="indigital-and-align"/> 

                                    <div class="card-hover-overlay" click.delegate="createZoomDialog(row.items[i],$parent.$index, i)"></div>

                                </div>

                                
                        </div>

                  
                    </div>
                </div>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-lip">
                </div>
            </div>

<!-- Right panel -->
<!--            <div id="right-panel" class="vertical grid-block grid-block-vertical-shadow" style="overflow:auto;">
                <compose view-model="comms/commsHeader"></compose>
                <compose view-model="messages/messagesHeader" style="min-height:90px; margin-top: 1rem; margin-right:1rem;margin-left: 1rem;"></compose>
                <compose id="message-container-dad"  view-model="messages/messages" style="overflow-x:hidden;"></compose>
-->
                <!-- white lip at bottom of scroll region -->
<!--                <div class="grid-content shrink scrolling-fat-lip">
                </div>
-->                <!-- New message -->
<!--                <div class="grid-content align-right shrink">
                    <div class="new-message-block">
                        <div class="message-userpic"><img src="/assets/lauren.png"></div>
                        <input type="text" id="msgInput" class="message-new-message-box" placeholder="New Message">
                        <a class="hollow button"  click.delegate="sendMessage()">Send Message</a>
                    </div>
                </div>
            </div>
        </div>
-->        <!-- spacer -->

        </div>

</template>
