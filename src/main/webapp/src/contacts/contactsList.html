<template>
    <require from="./sort"></require>
    <require from="./filter"></require>
    <div class="grid-block vertical shrink" style="width:100%; margin-top:1.5rem;">
        <!-- Search contacts -->
        <div class="grid-block shrink" style="margin-left:1rem; width:255px;">
            <input type="search" value.two-way="searchTerm" class="search-box" id="search-contacts" placeholder="Search Contacts" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Search Contacts'">
        </div>
        <!-- <require from="./take"></require> -->
        <!-- category -->
        <!--   <div class="grid-block shrink vertical" style="margin-left:1rem; margin-right:1rem;" > -->
        <div class="grid-block shrink" style="margin-left:1rem; margin-bottom:1rem;">
            <table class="big-accordion">
                <tr>
                    <td class="accordion-grey" style="width:20px;">
                        <button id="button11" class="accordion active" click.delegate="closeExpand(11)"></button>
                    </td>
                    <td class="accordion-grey">
                        <span>Recent Activity</span>
                        <span if.bind="(contactActivity)" class="alert-box">${contactActivity}</span>
                    </td>
                </tr>
            </table>
        </div>
        <div id="panel11" class="panel grid-block vertical scroll show" style="overflow-y:scroll;">
            <div id="contacts-inside-top2" repeat.for="connection of connections" class="" style="width:255px; overflow: visible;margin-left: 1rem;">

                <div  if.bind="(connection.user.id == user.id) && (connection.connectingStatus=='Pending')" style="margin-bottom: 1.5rem;">

                <span class="ui-text-label-me-left paragraph-5 contact-box">Incoming Connection Request</span>

                    <table class="width100">
                        <tr>

                            <td>
                                <div>
                                    <img if.bind="(connection.image)" src=${connection.image} class="clip-circle contact-entry" />
                                    <div if.bind="(!connection.image)" style="margin-right: 1rem;" class="avatar-circle ">${connection.name.charAt(0)}</div>
                                </div>
                            </td>
                            <td>
                                
                                    
                                    <div class="ui-text-label-me-left paragraph-5 contact-box">${connection.name} ${connection.surname}</div>
                                <!--     <div class="ui-text-label-s-left paragraph-5 contact-box">${connection.brand.name} ${connection.pressHouse.name}</div> -->
                                    <div class="ui-text-label-s-left paragraph-5 contact-box">${connection.email}</div>
                               
                            </td>

                            <!-- menu -->
                            <td class="align-top" >
                                <div class="look-menu-absolute-wrap">
                                    <span class="edit-box"><a href="#" click.delegate="contactMenu(connection.id)">...</a>
                                                    </span>
                                    <!-- edit contact modal popup -->
                                    <div id="${connectString}${connection.id}" class="look-menu-absolute lookEditContactClass" style="margin-bottom:5px;">
                                        <span class="look-menu-heading">ACTION</span>
                                        <ul class="look-menu-list">
                                            <li if.bind="true" class="look-menu-item">
                                                <a href="#" click.delegate="acceptContact(connection.id) " class="look-menu-link">Accept</a>
                                            </li>
                                            <li if.bind="true" class="look-menu-item">
                                                <a href="#" click.delegate="declineContact(connection.id) " class="look-menu-link">Decline</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- category -->
        <div class="grid-block shrink" style="margin-left:1rem; margin-bottom:1rem;">
            <table class="big-accordion ">
                <tr>
                    <td class="accordion-grey" style="width:20px;">
                        <button id="button12" class="accordion active" click.delegate="closeExpand(12)"></button>
                    </td>
                    <td class="accordion-grey"> <span>Alphabetical</span>
                    </td>
                </tr>
            </table>
        </div>
        <!--   <div id="panel12 " class="panel grid-block vertical noscroll show " style="display: block; margin-top:0.5rem; "> -->
        <div id="panel12" class="panel grid-block vertical scroll show" style="overflow-y:scroll;">
            <div id="contacts-inside-top " repeat.for="connection of connections | sort: 'name': 'ascending' | filter:searchTerm:filterFunc " class="" style="width:255px; overflow: visible;margin-left: 1rem; margin-bottom:1.5rem;">
                <table if.bind="(connection.user.id == user.id) && (connection.connectingStatus=='Accepted')" class="width100">
                    <tr>
                        <td>
                            <div>
                                <img if.bind="(connection.image)" src=${userVar.image} class="clip-circle contact-entry" />
                                <div if.bind="(!connection.image)" style="margin-right: 1rem; " class="avatar-circle ">${connection.name.charAt(0)}</div>
                                <!--  <div class="contact-mark ">
                                                    <img src="/assets/CheckMark.png " alt=" ">
                                                    <!-- <img src="/assets/QuestionMark.png " alt=" "> 
                                                </div> -->
                            </div>
                        </td>
                        <td>
                            <div if.bind="(connection.email !=user.email)">
                                <div class="ui-text-label-me-left paragraph-5 contact-box">${connection.name} ${connection.surname}</div>
                                <div class="ui-text-label-s-left paragraph-5 contact-box">${connection.brand.name} ${connection.pressHouse.name}</div>
                            </div>
                            <div if.bind="(connection.email==user.email)">
                                <div class="ui-text-label-me-left paragraph-5 contact-box">${connection.name} ${connection.surname} (Me)</div>
                                <div class="ui-text-label-s-left paragraph-5 contact-box">${connection.brand.name} ${connection.pressHouse.name}</div>
                            </div>
                        </td>
                        <td class="align-top"><span class="alert-box">8</span></td>
                        <!-- men -->
                        <td class="align-top">
                            <div class="look-menu-absolute-wrap">
                                <span class="edit-box"><a href="#" click.delegate="lookEditContact(connection.id)">...</a>
                                                </span>
                                <!-- edit contact modal popup -->
                                <div id="${connection.id}" class="look-menu-absolute lookEditContactClass" style="margin-bottom:5px;">
                                    <span class="look-menu-heading">${userVar.name}</span>
                                    <ul class="look-menu-list">
                                        <li if.bind="(connection.email !=user.email)" class="look-menu-item">
                                            <a href="#" click.delegate="initiateMessage(connection.id) " class="look-menu-link">Send Message</a>
                                        </li>
                                        <li if.bind="(connection.email==user.email)" class="look-menu-item">
                                            <a href="#" click.delegate="createDialogEditContact(connection.id) " class="look-menu-link">Edit</a>
                                        </li>
                                        <li if.bind="(connection.email==user.email)" class="look-menu-item">
                                            <a href="#" click.delegate="CreateDialogUpdatePhoto(connection.id) " class="look-menu-link">Update Photo</a>
                                        </li>
                                        <li if.bind="(connection.email !=user.email)" class="look-menu-item">
                                            <a href="#" click.delegate="declineContact(connection.id) " class="look-menu-link">Delete Contact</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</template>
<!--  </div> -->
</template>
