<template>
    <require from="./sort"></require>
    <require from="./filter"></require>
    <div class="grid-block vertical shrink" style="width:100%; margin-top:1.5rem;">
        <!-- Search contacts -->
        <div class="grid-block shrink" style="margin-left:1rem; width:255px;">
            <input type="search" value.two-way="searchTerm" class="search-box" id="search-contacts" placeholder="Search Contacts" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Search Contacts'">
        </div>
        <!-- <require from="./take"></require> -->
        <!-- category -->
        <!--   <div class="grid-block shrink vertical" style="margin-left:1rem; margin-right:1rem;" > -->
        <div class="grid-block shrink" style="margin-left:1rem; margin-bottom:0.5rem;">
            <table class="big-accordion">
                <tr>
                    <td class="accordion-grey" style="width:20px;">
                        <button id="button1111" class="accordion active" click.delegate="closeExpand(1111)"></button>
                    </td>
                    <td class="accordion-grey">
                        <span>Recent Activity</span>
                       <!-- <span if.bind="(contactActivity)" class="alert-box">${contactActivity}</span> -->
                    </td>
                </tr>
            </table>
        </div>
        <div id="panel1111" class="panel grid-block vertical show" style="overflow-y:scroll;">
            <div id="contacts-inside-top2" repeat.for="userLoopC of users" class="" style="width:255px; overflow: visible;margin-left: 1rem;">
                <div if.bind="(userLoopC.connections!=null)" repeat.for="connectionC of userLoopC.connections">

                    <!-- in coming -->
                    <div if.bind="(connectionC.connectedUserId == user.id) && (connectionC.connectingStatus=='Pending')" style="">
                        <span class="look-menu-heading paragraph-5" style="outline: 1px solid lightgray; width: 250px; background: white;">Incoming Connection Request</span>
                        <table class="width100">
                            <tr>
                                <td>
                                    <div>
                                        <img if.bind="(users[connectionC.user.id -1].image)" src=${users[connectionC.user.id-1].image} class="clip-circle contact-entry" />
                                        <div if.bind="(!users[connectionC.user.id -1].image)" style="margin-right: 1rem;" class="avatar-circle "> ${users[connectionC.user.id -1].name.charAt(0)}</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="ui-text-label-me-left paragraph-5 contact-box">${users[connectionC.user.id -1].name} ${users[connectionC.user.id -1].surname}</div>
                                    <!--     <div class="ui-text-label-s-left paragraph-5 contact-box">${connection.brand.name} ${connection.pressHouse.name}</div> -->
                                    <div class="ui-text-label-s-left paragraph-5 contact-box">${users[connectionC.user.id -1].email}</div>
                                </td>
                            </tr>
                        </table>
                        <div class="grid-block align-center shrink">
                            <a class="hollow button" click.delegate="declineContact(connectionC.user.id,connectionC.id) ">Decline</a>
                            <a class="button" href="#" click.delegate="acceptContact(connectionC.user.id,connectionC.id)">Accept</a>
                        </div>
                    </div>

                    <!-- out going -->
                    <div if.bind="(connectionC.user.id == user.id) && (connectionC.connectingStatus=='Pending')" style="">
                        <span class="look-menu-heading paragraph-5" style="outline: 1px solid lightgray; width: 250px; background: white;">Outgoing Connection Request</span>
                        <table class="width100">
                            <tr>
                                <td>
                                    <div>
                                        <img if.bind="(users[connectionC.connectedUserId -1].image)" src=${users[connectionC.connectedUserId-1].image} class="clip-circle contact-entry" />
                                        <div if.bind="(!users[connectionC.connectedUserId -1].image)" style="margin-right: 1rem;" class="avatar-circle "> ${users[connectionC.connectedUserId -1].name.charAt(0)}</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="ui-text-label-me-left paragraph-5 contact-box">${users[connectionC.connectedUserId -1].name} ${users[connectionC.connectedUserId -1].surname}</div>
                                    <!--     <div class="ui-text-label-s-left paragraph-5 contact-box">${connection.brand.name} ${connection.pressHouse.name}</div> -->
                                    <div class="ui-text-label-s-left paragraph-5 contact-box">${users[connectionC.connectedUserId -1].email}</div>
                                </td>
                            </tr>
                        </table>
                        <div class="grid-block align-center shrink">
                            <a class="hollow button" click.delegate="deleteContact(user.id,connectionC.id) ">Delete</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!-- category Contact lists-->
        <div class="grid-block shrink" style="margin-left:1rem; margin-bottom:1rem;">
            <table class="big-accordion ">
                <tr>
                    <td class="accordion-grey" style="width:20px;">
                        <button id="button1212" class="accordion active" click.delegate="closeExpand(1212)"></button>
                    </td>
                    <td class="accordion-grey"> <span>Alphabetical</span>
                    </td>
                </tr>
            </table>
        </div>
        <!--   <div id="panel12 " class="panel grid-block vertical noscroll show " style="display: block; margin-top:0.5rem; "> -->
        <!-- insert special (ME) entry! at top

                                
    <div class="ui-text-label-me-left paragraph-5 contact-box">${users[connection.user.id].name} ${users[connection.user.id].surname} (Me)</div>
    <div class="ui-text-label-s-left paragraph-5 contact-box">${users[connection.user.id].brand.name} ${users[connection.user.id].pressHouse.name}</div>
                         


        --> <!-- | sort: 'name': 'ascending' | filter:searchTerm:filterFunc -->
        <div id="panel1212" class="panel grid-block vertical scroll show" style="overflow-y:scroll;">
            <div id="contacts-inside-top " repeat.for="userLoop of users" class="" style="width:255px; overflow: visible;margin-left: 1rem;">
                <!-- Not initiated by me -->
                <!--      <span>${userLoopconnections}</span> -->
                <div if.bind="((userLoop.connections!=null) && (userLoop.id != user.id))" repeat.for="connection of userLoop.connections">
                    <a href="#" click.delegate="initiateMessage(userLoop.id)">
                        <!--  -->
                        <table if.bind="((user.id == connection.connectedUserId) && (connection.connectingStatus=='Accepted'))" class="width100">
                            <tr>
                                <td>
                                    <div>
                                        <img if.bind="(userLoop.image)" src=${userLoop.image} class="clip-circle contact-entry" />
                                        <div if.bind="(!userLoop.image)" style="margin-right: 1rem; " class="avatar-circle ">${userLoop.name.charAt(0)}</div>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div class="ui-text-label-me-left paragraph-5 contact-box">${userLoop.name} ${userLoop.surname}</div>
                                        <div class="ui-text-label-s-left paragraph-5 contact-box">${userLoop.brand.name} ${userLoop.pressHouse.name}</div>
                                    </div>
                                </td>
                                <td class="align-top"><span class="alert-box">${connection.numberNewMessages}</span></td>
                                <!-- NO MENU FOR NOW. Place holder -->
                                <td class="align-top">
                                    <div class="look-menu-absolute-wrap">
                                        <span class="edit-box"><a href="#" click.delegate="lookEditContact(userLoop.id)"></a> <!-- ... -->
                                                    </span>
                                        <!-- edit contact modal popup -->
                                        <div id="${userLoop.id}" class="look-menu-absolute lookEditContactClass" style="margin-bottom:5px;">
                                            <span class="look-menu-heading">${userLoop.name}</span>
                                            <ul class="look-menu-list">
                                                <li if.bind="(userLoop.id !=user.id)" class="look-menu-item">
                                                    <a href="#" click.delegate="initiateMessage(userLoop.id) " class="look-menu-link">Send Message</a>
                                                </li>
                                                <li if.bind="(userLoop.id !=user.id)" class="look-menu-item">
                                                    <a href="#" click.delegate="deleteContact(connection.id) " class="look-menu-link">Delete Contact</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                                <!-- NO MENU FOR NOW. Place holder -->
                            </tr>
                        </table>
                    </a>
                </div>
                <!-- end not initiated by me -->
                <!-- my initiated connections -->
                <!-- <span>${userLoop.connections}</span>-->
                <div if.bind="((userLoop.connections!=null) && (userLoop.id == user.id))" repeat.for="connection2 of userLoop.connections">
                    <a href="#" click.delegate="initiateMessage(users[connection2.connectedUserId-1].id)">
                        <table if.bind="((connection2.connectedUserId != user.id) && (connection2.connectingStatus=='Accepted'))" class="width100">
                            <tr>
                                <td>
                                    <div>
                                        <img if.bind="(users[connection2.connectedUserId-1].image)" src=${users[connection2.connectedUserId-1].image} class="clip-circle contact-entry" />
                                        <div if.bind="(!users[connection2.connectedUserId-1].image)" style="margin-right: 1rem; " class="avatar-circle ">${users[connection2.connectedUserId-1].name.charAt(0)}</div>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div class="ui-text-label-me-left paragraph-5 contact-box">${users[connection2.connectedUserId-1].name} ${users[connection2.connectedUserId-1].surname}</div>
                                        <div class="ui-text-label-s-left paragraph-5 contact-box">${users[connection2.connectedUserId-1].brand.name} ${users[connection2.connectedUserId-1].pressHouse.name}</div>
                                    </div>
                                </td>
                                <td class="align-top"><span class="alert-box">${connection2.numberNewMessages}</span></td>
                                <!-- NO MENU FOR NOW. Place holder -->
                                <td class="align-top">
                                    <div class="look-menu-absolute-wrap">
                                        <span class="edit-box"><a href="#" click.delegate="lookEditContact(userLoop.id)"></a> <!-- ... -->
                                                    </span>
                                        <!-- edit contact modal popup -->
                                        <div id="${userLoop.id}" class="look-menu-absolute lookEditContactClass" style="margin-bottom:5px;">
                                            <span class="look-menu-heading">${users[connection2.connectedUserId-1].name}</span>
                                            <ul class="look-menu-list">
                                                <li>
                                                    <!-- if.bind="(userLoop.id !=user.id)" class="look-menu-item"> -->
                                                    <a href="#" click.delegate="initiateMessage(users[connection2.connectedUserId-1].id) " class="look-menu-link">Send Message</a>
                                                </li>
                                                <li>
                                                    <!-- if.bind="(userLoop.id !=user.id)" class="look-menu-item"> -->
                                                    <a href="#" click.delegate="deleteContact(connection2.id) " class="look-menu-link">Delete Contact</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                                <!-- NO MENU FOR NOW. Place holder -->
                            </tr>
                        </table>
                    </a>
                </div>
                <!-- end my initiated connections -->
                <!-- add me -->
                <!-- <li> 
                                                <a href="#" click.delegate="createDialogEditContact(userLoop.id) " class="look-menu-link">Edit</a>
                                            </li>
                                            <li> 
                                                <a href="#" click.delegate="CreateDialogUpdatePhoto(userLoop.id) " class="look-menu-link">Update Photo</a>
 
                                             </li> -->
            </div>
        </div>
    </div>
</template>
<!--  </div> -->
</template>
