<!-- requestman.html -->
<template>
    <require from="./common/viewDateFormatter"></require>
    <require from="./calendars/datepicker"></require>
    <!-- Main building block -->
    <div class="vertical grid-block spa-background">

        <!-- header -->
        <compose view-model="header"></compose> 
        <!-- spacer -->
        <div class="grid-block shrink spa-v-spacer ">
        </div>
        <div class="grid-block" style="overflow:visible;">
            <!-- -->
            <!-- Request Panel -->
            <!-- -->
            <div id="request-panel" class="grid-block noscroll vertical grid-block-vertical-shadow ">
                <!-- header -->
                <div class="grid-block tool-header shrink ">
                    <div class="grid-block align-left tool-header-spacer">
                        <span class="ui-text-label-m-broad ">REQUEST MANAGER</span>
                        <span class="alert-box">3</span>
                    </div>
                    <div class="grid-block align-right tool-header-spacer">
                        <span class="expando">
                      <a route-href="route: index;"><img  src="/assets/nav/collapso.png" /></a>
                    </span>
                    </div>
                </div>
                <div class="grid-block">
                    <!-- First Column -->
                    <!-- Calendar + Image detail -->
                    <!-- -->
                    <div id="left-panel" class="vertical grid-block noscroll">
                        <!-- Calendar -->
                        <div class="grid-block shrink">
                            <compose view-model="calendars/requestCalendar"></compose>
                        </div>
                        <!-- Image holder -->
                        <div class="grid-content request-image-fix" style="
                              background-image: url('/assets/looks/11.jpg');
                              background-position: left top;">
                        </div>
                        <!-- Image information holder -->
                        <div class="grid-content ui-text-label-m request-image-info-fix">
                            <span>Look 3456BL</span>
                            <br>
                            <span>Ralph Lauren</span>
                            <br>
                            <span>Black smock with black pants</span>
                            <br>
                            <span>Star necklace</span>
                            <br>
                            <span>Black boots</span>
                        </div>
                    </div>
                    <!-- spacers -->
                    <div class="grid-block shrink spa-h-spacer">
                    </div>
                    <!-- 2nd Column -->
                    <!-- -->
                    <div class="grid-block vertical">
                        <!-- search and filter requests -->
                        <div class="grid-block shrink" style="margin-left: 1rem; margin-right: 1rem; margin-top:1rem;">
                            <div class="grid-block">
                                <!-- Search requests -->
                                <input type="search" value.two-way="searchtext" class="search-box" id="search-requests" placeholder="Search Text" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Search Text'">
                            </div>
                            <div class="grid-block align-center">
                                <!-- filter requests -->
                                <span class="inline-label">
                                  <span class="form-label">Filter</span>
                                <select name="" id="">
                                    <option>Overdue</option>
                                    <option>All</option>
                                </select>
                                </span>
                            </div>
                            <div class="grid-block align-center">
                                <!-- order results -->
                                <span class="inline-label">
                                  <span class="form-label">Order</span>
                                <select name="" id="">
                                    <option>By Date</option>
                                    <option>By Person</option>
                                    <option>By Request Number</option>
                                </select>
                                </span>
                            </div>
                        </div>
                        <!-- Accordion -->
                        <!--Header -->
                        
                            <div if.bind="user.type === 'brand'"  class="grid-content shrink" style="overflow-x: hidden; overflow-y: scroll; padding:0; margin-left:1rem; margin-right:1rem; margin-top:1rem;">
                                <table class="big-accordion">
                                    <tr>
                                        <td class="accordion-underline w3"></td>
                                        <td class="accordion-underline w4">ID</td>
                                        <td class="accordion-underline w11">DUE DATE</td>
                                        <td class="accordion-underline w25">SHOOT</td>
                                        <td class="accordion-underline w14">COMPANY</td>
                                        <td class="accordion-underline w13">WHO</td>
                                        <td class="accordion-underline w5">#</td>
                                        <td class="accordion-underline w14">STATUS</td>
                                        <td class="accordion-underline w5"></td>
                                    </tr>
                                </table>
                            </div>
                            <div if.bind="user.type === 'press'"  class="grid-content shrink" style="overflow-x: hidden; overflow-y: scroll; padding:0; margin-left:1rem; margin-right:1rem; margin-top:1rem;">
                                <table class="big-accordion">
                                    <tr>
                                        <td class="accordion-underline w3"></td>
                                        <td class="accordion-underline w4">ID</td>
                                        <td class="accordion-underline w11">REQUESTED</td>
                                        <td class="accordion-underline w15">BRAND</td>
                                        <td class="accordion-underline w24">EDITORIAL</td>
                                        <td class="accordion-underline w13">OWNER</td>
                                        <td class="accordion-underline w5">#</td>
                                        <td class="accordion-underline w14">STATUS</td>
                                        <td class="accordion-underline w5"></td>
                                    </tr>
                                </table>
                            </div>                            
                            <!-- Content Container-->
                            <!-- Rows of content BRAND View-->
                            <div class="grid-content" style="overflow-x: hidden; overflow-y: scroll; padding:0; margin-left: 1rem; margin-right: 1rem;">
                                
                                <div repeat.for="booking of bookings">
                                    <table  class="big-accordion">
                                        <tr>
                                            <td class="accordion-grey w3">
                                                <button id="button${$index}" class="accordion" click.delegate="closeExpand($index)"></button>
                                            </td>
                                            <td class="accordion-grey w4">${booking.id}</td>
                                            <td class="accordion-grey w11">${booking.bookingStartDate | viewDateFormat}</td>
                                            <td class="accordion-grey w25">${booking.editorialName}</td>
                                            <td class="accordion-grey w14">${booking.pressHouse.name}</td>
                                            <td class="accordion-grey w13">${booking.requestingUser.name} ${booking.requestingUser.surname}</td>
                                            <td class="accordion-grey w5">${booking.searchableItems.length}</td>
                                            <td class="accordion-grey w14">${booking.requestStatus}</td>
                                            <td class="accordion-grey w5">
                                                <div class="look-menu-absolute-wrap">
                                                    <span class="edit-box" ><a href="#" click.delegate="lookEditMenu(booking.id)">...</a></span>
                                                    <!-- edit request modal popup -->
                                                     <div class="look-menu-absolute" id="requestManTest${booking.id}">
                                                        <span class="look-menu-heading">REQUEST #${booking.id}</span>
                                                        <ul if.bind="user.type === 'brand'"  class="look-menu-list">
                                                            <li class="look-menu-item"><a href="#" click.delegate="editSampleRequest(booking.id)" class="look-menu-link">Edit</a></li>
                                                            <li class="look-menu-item"><a href="#" click.delegate="denySampleRequest(booking.id)" class="look-menu-link">Deny</a></li>                                            
                                                            <li class="look-menu-item"><a href="#" click.delegate="shipSampleRequest(booking.id)" class="look-menu-link">Ship</a></li>
                                                            <li class="look-menu-item"><a click.delegate="sendSampleRequest(booking.id)" href="#" class="look-menu-link">Send</a></li>
                                                            <li class="look-menu-item"><a click.delegate="markPickedUpSampleRequest(booking.id)" href="#" class="look-menu-link">Mark Picked Up</a></li>
                                                            <li class="look-menu-item"><a click.delegate="markReturnedSampleRequest(booking.id)" href="#" class="look-menu-link">Mark Returned</a></li>
                                                            <li class="look-menu-item"><a click.delegate="restockedSampleRequest(booking.id)" href="#" class="look-menu-link">Restocked</a></li>
                                                            <li class="look-menu-item"><a click.delegate="deleteSampleRequest(booking.id)" href="#" class="look-menu-link">Delete Request</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>
                                    </table>

                                    <!-- expanding data -->
                                    <div id="panel${$index}" class="panel grid-block vertical" style="margin-left: 0.5rem; margin-top:0.5rem;">
                                        <div class="grid-content">
                                            <span>OVERVIEW</span>
                                        </div>
                                        <div class="grid-content">
                                            <span>Shoot by Simon Photog styled by Josh Hartnet at High Barnet studios 19-20 June for June ‘16 issue</span>
                                        </div>
                                        <div class="grid-content" style="margin-top:0.5rem;">
                                            <span>SHIPPING OUT:</span><span style="margin-left:0.5rem;">s346x</span>
                                        </div>
                                        <div class="grid-content">
                                            <span class="ui-text-label-m-blue">Occured</span>
                                            <span>on 12 July 2016 by CourierCo (we paid) going to Elle Magazine, 234 St. James Street, London SE1 1RL picked up at 15:33 by Tim. Insured for £2,134 </span>
                                        </div>
                                        <div class="grid-content" style="margin-top:0.5rem;">
                                            <span>RETURN:</span><span style="margin-left:0.5rem;">s346y</span>
                                        </div>
                                        <div class="grid-content">
                                            <span class="ui-text-label-m-blue">Scheduled</span>
                                            <span>for ${booking.bookingEndDate | viewDateFormat} by  (we pay) coming back to RL London at 09:00 addressed to Shep Sheppard. Insured for £2,134</span>
                                        </div>
                                        <div class="grid-content" style="margin-top:0.5rem;">
                                            <span>SAMPLES:</span><span style="margin-left:0.5rem;">${booking.searchableItems.length}</span>
                                        </div>
                                        <div class="grid-content" style="margin-top:0.5rem; margin-bottom: 1rem;">
                                            <table class="" style="table-layout:fixed;">
                                                <tr  style="height:1rem;">
                                                    <td repeat.for="item of booking.searchableItems" class="accordion"><img src="/assets/looks/11.jpg" width="60px;" /></td> <!-- src="${item.image}" -->
                                                </tr>
                                                <tr style="height:1rem;">
                                                    <td repeat.for="item of booking.searchableItems"  class="accordion sample-padding">${item.id}</td>
                                                </tr>
                                                <tr  style="height:1rem;">
                                                    <td repeat.for="item of booking.searchableItems" class="accordion sample-padding">${item.name}</td>
                                                </tr>
                                               <tr>
                                                    <td repeat.for="status of booking.searchableItemsStatus" class="accordion sample-padding">${status.brandStatus}</td>
                                                </tr> 
                                            </table>
                                        </div>
                                        
                                    </div>
                                </div>  
                                
                            </div>
                       
                    </div>
                </div>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-lip">
                </div>
            </div>
            <!-- spacer -->
            <div class="grid-block shrink spa-h-spacer">
            </div>
            <!-- -->
            <!-- Communications Panel  -->
            <!-- -->
            <div id="right-panel" class="vertical grid-block grid-block-vertical-shadow" >
                <!-- Header -->
                <compose view-model="comms/commsHeader"></compose>
                <compose view-model="contacts/contactsHeader" style="overflow:hidden; min-height:36px; margin-top: 1rem;"></compose>
                <compose view-model="contacts/contactsList" style="overflow-x:hidden;"></compose>
                <!-- white lip at bottom of scroll region -->
                <div class="grid-content shrink scrolling-fat-lip">
                </div>
                <!-- BUTTONS -->
                <div class="grid-block align-center shrink">
                    <a class="hollow button" href="#" click.delegate="createDialogNewContact(1)">New Contact...</a>
                    <a class="button" href="#" click.delegate="CreateDialogImportContacts(1)">Import Contacts...</a>
                </div>
            </div>
        </div>
        <!-- spacer -->
        <div class="grid-content shrink spa-v-spacer">
        </div>
    </div>
</template>
